<div class="kendo-table-container">
    <div class="table-header" [hidden]="hideHeader">
        <div class="table-title">
            <i class="bi bi-journal"></i>
            {{tableName}}
        </div>

        <div class="actions">
            <i class="bi bi-gear-fill icon-box mr-2" (click)="showSettingsModal()"></i>
            
            <i class="bi bi-filetype-csv icon-box mr-2" (click)="toCsv()"></i>

            <button (click)="toExcel()">
                <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0.5 16.1655C0.5 14.5818 0.5 12.998 0.5 11.4143C0.506468 11.3153 0.519408 11.2163 0.519408 11.1173C0.525876 10.4297 0.525873 9.74199 0.532342 9.05952C0.53881 8.19471 1.24386 7.62686 2.3176 7.61644C2.53105 7.61644 2.73804 7.61644 2.96443 7.61644C2.96443 7.52787 2.96443 7.46536 2.96443 7.40284C2.96443 6.02748 2.96443 4.65733 2.96443 3.28197C2.97089 1.71386 4.47154 0.5 6.4185 0.5C9.28396 0.5 12.1494 0.5 15.0084 0.5C15.5453 0.5 16.011 0.640661 16.412 0.927194C17.531 1.7347 18.6565 2.53699 19.782 3.33928C20.2607 3.68312 20.5 4.1051 20.5 4.62607C20.4935 9.13767 20.5 13.6545 20.5 18.1661C20.5 19.2028 19.6268 20.1249 18.3913 20.4062C18.2361 20.4427 18.0809 20.4687 17.9256 20.5C13.7988 20.5 9.67205 20.5 5.54528 20.5C5.41591 20.474 5.28008 20.4531 5.15071 20.4219C3.86352 20.1457 2.97736 19.2236 2.97089 18.1452C2.97089 17.8795 2.97089 17.6138 2.97089 17.3325C2.79625 17.3325 2.64101 17.3325 2.48577 17.3325C1.35382 17.3325 0.849292 17.0356 0.519408 16.1707C0.506471 16.176 0.5 16.1708 0.5 16.1655ZM19.5103 14.6026C19.5103 12.524 19.5103 10.4661 19.5103 8.39268C19.4457 8.39268 19.3939 8.39268 19.3422 8.39268C13.663 8.39268 7.97736 8.39268 2.29819 8.39268C2.22704 8.39268 2.15589 8.39268 2.08473 8.40831C1.70957 8.47083 1.50259 8.70005 1.50259 9.05952C1.49612 10.9038 1.48965 12.748 1.48318 14.5974C1.48318 14.6339 1.48965 14.6756 1.48965 14.6808C1.82601 14.6547 2.14295 14.6131 2.46637 14.6078C3.22316 14.5974 3.97348 14.6026 4.73027 14.6026C9.5815 14.6026 14.4263 14.6026 19.2775 14.6026C19.3486 14.6026 19.4263 14.6026 19.5103 14.6026ZM19.5168 4.7459C18.7147 4.7459 17.9321 4.75111 17.1559 4.7459C15.9851 4.74069 15.1507 4.06864 15.1442 3.13089C15.1442 2.57346 15.1442 2.02123 15.1442 1.46379C15.1442 1.40649 15.1442 1.35439 15.1442 1.28666C15.0472 1.28666 14.9761 1.28666 14.9049 1.28666C12.0783 1.28666 9.25808 1.28666 6.43144 1.28666C5.00194 1.28666 3.94114 2.14105 3.93467 3.29239C3.93467 4.67817 3.93467 6.05874 3.93467 7.44452C3.93467 7.50182 3.93467 7.55392 3.93467 7.60602C9.14812 7.60602 14.3292 7.60602 19.5168 7.60602C19.5168 6.64743 19.5168 5.70448 19.5168 4.7459ZM19.5298 15.3997C14.3163 15.3997 9.13519 15.3997 3.94114 15.3997C3.94114 15.4674 3.94114 15.5195 3.94114 15.5716C3.94114 16.4104 3.94114 17.2492 3.94114 18.0879C3.94114 19.0569 4.77555 19.7238 5.98512 19.7238C9.82083 19.7238 13.6501 19.7238 17.4858 19.7238C18.7083 19.7238 19.5362 19.0621 19.5362 18.0775C19.5362 17.2387 19.5362 16.4 19.5362 15.5612C19.5298 15.5143 19.5298 15.4622 19.5298 15.3997ZM16.1339 1.77637C16.1274 1.82326 16.121 1.83889 16.121 1.85452C16.121 2.28171 16.1145 2.71412 16.121 3.14131C16.1274 3.63102 16.5349 3.95402 17.1429 3.95923C17.7639 3.95923 18.3784 3.95923 18.9993 3.95923C19.0446 3.95923 19.0964 3.95402 19.1675 3.9436C18.1455 3.21946 17.1494 2.50573 16.1339 1.77637ZM2.95149 15.4101C2.62807 15.4101 2.31759 15.3841 2.01358 15.4153C1.67723 15.4518 1.46378 15.7175 1.47672 16.004C1.48965 16.2645 1.72898 16.5146 2.05239 16.5406C2.34347 16.5667 2.64748 16.5458 2.95149 16.5458C2.95149 16.1707 2.95149 15.7957 2.95149 15.4101Z" fill="#2DB155" stroke="#2DB155" stroke-width="0.3"/>
                    <path d="M14.491 13.5041C13.9671 13.4937 13.4237 13.3218 12.9709 12.9727C12.8416 12.8737 12.7575 12.7591 12.7834 12.6133C12.8092 12.4622 12.9063 12.3476 13.0874 12.2955C13.2814 12.2329 13.4625 12.2642 13.6048 12.384C13.8636 12.5976 14.174 12.707 14.5427 12.7279C14.795 12.7383 15.0214 12.6966 15.196 12.5403C15.3578 12.3944 15.3513 12.2382 15.1637 12.1183C15.0602 12.0506 14.9373 11.9985 14.8144 11.9568C14.4716 11.8422 14.1288 11.7276 13.786 11.6182C13.3138 11.4671 13.055 11.1858 13.0033 10.7899C12.9515 10.3731 13.165 10.0397 13.5984 9.81044C14.0706 9.56037 14.588 9.52911 15.112 9.65936C15.3966 9.73229 15.6747 9.85211 15.927 9.97715C16.1792 10.1022 16.2116 10.347 16.0499 10.5294C15.8946 10.7065 15.6165 10.743 15.3772 10.6127C15.0925 10.4564 14.7885 10.3418 14.4328 10.3835C14.3164 10.3991 14.187 10.4304 14.0964 10.4877C13.8894 10.6127 13.9347 10.8159 14.1676 10.8941C14.5169 11.0087 14.8662 11.1181 15.2154 11.2327C15.6876 11.389 16.0822 11.6286 16.231 12.0454C16.3862 12.4882 16.2051 12.8633 15.7911 13.1655C15.4548 13.4103 15.0408 13.5093 14.491 13.5041Z" fill="#2DB155" stroke="#2DB155" stroke-width="0.3"/>
                    <path d="M6.66424 10.7535C6.96179 10.4096 7.24639 10.0918 7.52453 9.76884C7.65389 9.62297 7.82854 9.55524 8.04846 9.59692C8.24251 9.63339 8.39128 9.73758 8.40421 9.89387C8.41068 10.0137 8.36541 10.1544 8.28132 10.2533C7.9579 10.6493 7.60861 11.0348 7.25932 11.4307C7.60214 11.8215 7.9385 12.2122 8.28132 12.5977C8.35894 12.6811 8.43009 12.7696 8.50771 12.853C8.68882 13.0718 8.65001 13.301 8.41069 13.4313C8.17783 13.5563 7.89969 13.5094 7.71858 13.301C7.40163 12.9415 7.09115 12.5821 6.7742 12.2226C6.74833 12.1913 6.70952 12.1601 6.66424 12.1132C6.47666 12.3268 6.30202 12.5248 6.12737 12.7227C5.9592 12.9155 5.79102 13.1083 5.62284 13.301C5.43526 13.5094 5.14419 13.5615 4.91133 13.426C4.68494 13.2958 4.64613 13.0614 4.82724 12.853C5.20241 12.4258 5.5711 11.9934 5.95273 11.5714C6.05622 11.4568 6.04975 11.3838 5.94626 11.2744C5.62931 10.9254 5.31884 10.5659 5.01483 10.2117C4.88546 10.0658 4.86605 9.9095 4.98895 9.75842C5.10538 9.61776 5.28002 9.54482 5.47407 9.59692C5.60344 9.62818 5.73928 9.71153 5.82336 9.8001C6.10797 10.1023 6.37317 10.42 6.66424 10.7535Z" fill="#2DB155" stroke="#2DB155" stroke-width="0.3"/>
                    <path d="M10.5259 12.7266C10.7846 12.7266 11.0175 12.7266 11.2504 12.7266C11.5867 12.7318 11.7872 12.8777 11.7872 13.1173C11.7872 13.3465 11.5867 13.4976 11.2633 13.5028C10.8817 13.508 10.4936 13.508 10.1119 13.5028C9.72384 13.4976 9.55566 13.357 9.55566 13.0444C9.55566 12.0285 9.55566 11.0126 9.55566 9.99671C9.55566 9.75706 9.74324 9.59556 10.0084 9.59035C10.2866 9.57993 10.4936 9.73101 10.5194 9.97066C10.5259 10.0175 10.5194 10.0644 10.5194 10.1113C10.5194 10.9188 10.5194 11.7263 10.5194 12.5338C10.5259 12.5911 10.5259 12.6484 10.5259 12.7266Z" fill="#2DB155" stroke="#2DB155" stroke-width="0.3"/>
                </svg>
            </button>

            <button (click)="filterToggle()">
                <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.66663 14.0903V10.166C7.66726 10.0563 7.64624 9.94763 7.60477 9.84609C7.5633 9.74456 7.50219 9.65222 7.42496 9.57435L7.07174 9.92824L7.07066 9.92716M7.66663 14.0903L7.07066 9.92716M7.66663 14.0903L7.44302 14.2021L7.66663 14.6493H8.16663V14.3993L9.33329 13.816L7.66663 14.0903ZM7.07066 9.92716C7.07043 9.92693 7.0702 9.92669 7.06997 9.92646L2.65507 5.5199L1.79957 4.66602H3.00829H13.9916H15.2003L14.3448 5.5199L9.92995 9.92646C9.92972 9.92669 9.92949 9.92693 9.92926 9.92716C9.89869 9.95816 9.87449 9.99485 9.85803 10.0352C9.84144 10.0758 9.83303 10.1193 9.83328 10.1631L9.8333 10.166L9.83329 13.816V14.125L9.5569 14.2632L7.89023 15.0966L7.16663 15.4584V14.6493V10.166V10.1631H7.16664C7.16689 10.1193 7.15848 10.0758 7.14189 10.0352C7.12543 9.99485 7.10123 9.95816 7.07066 9.92716ZM0.666626 3.64119V3.64102V2.66602C0.666626 2.13558 0.87734 1.62688 1.25241 1.2518C1.62749 0.876729 2.13619 0.666016 2.66663 0.666016H14.3333C14.8637 0.666016 15.3724 0.876729 15.7475 1.2518C16.1226 1.62687 16.3333 2.13558 16.3333 2.66602V3.63313C16.3241 3.90788 16.2584 4.17782 16.1402 4.42607L16.0916 4.52806V4.57922C16.003 4.75439 15.8868 4.91446 15.7473 5.05322L15.7464 5.05413L10.6464 10.1541L10.5 10.3006V10.5077V14.3317C10.4997 14.3931 10.4825 14.4532 10.4502 14.5054C10.4179 14.5576 10.3719 14.5998 10.3172 14.6276C10.317 14.6276 10.3168 14.6277 10.3166 14.6278L6.98469 16.2938L6.98468 16.2938L6.9803 16.296C6.93411 16.3197 6.88304 16.3322 6.83117 16.3327C6.76922 16.3328 6.70848 16.3156 6.65575 16.2831C6.60811 16.2532 6.56883 16.2116 6.54158 16.1623C6.51417 16.1127 6.49985 16.057 6.49996 16.0003V15.9993V10.5077V10.2996L6.35236 10.153L1.21927 5.05323C1.0798 4.91446 0.963607 4.75439 0.874959 4.57922V4.53676L0.833293 4.44119C0.72327 4.18884 0.666531 3.91648 0.666626 3.64119ZM5.99996 10.5077V15.9993L0.374959 4.69102C0.492692 4.95849 0.659453 5.20157 0.866626 5.40768L5.99996 10.5077ZM15.1666 3.99935H15.6666V3.49935V2.66602C15.6666 2.31239 15.5262 1.97326 15.2761 1.72321C15.0261 1.47316 14.6869 1.33268 14.3333 1.33268H2.66663C2.313 1.33268 1.97387 1.47316 1.72382 1.72321L2.07737 2.07676L1.72382 1.72321C1.47377 1.97326 1.33329 2.31239 1.33329 2.66602V3.49935V3.99935H1.83329H15.1666Z" fill="#2DB155" stroke="#2DB155"/>
                </svg>
            </button>

            <input type="text" (input)="onFilter($event)">
        </div>
    </div>
    
    <div #gridContainer>
        <kendo-grid #table
            [kendoGridSelectBy]="kendoGridSelectBy"
            [kendoGridBinding]="originalData.gridViewData"
            [data]="originalData.gridData"
            [loading]="dataIsLoading"
            [pageSize]="pageSize"
            [filterable]="filterable"
            [pageable]="{type: 'input'}"
            [sortable]="true"
            [skip]="skip"
            [height]="gridHeight"
            (dblclick)="doubleClickEvent.emit(activeRow)"
        >
            <ng-container *ngFor="let col of grigColumns">
                <kendo-grid-column [hidden]="!col.hidden" [field]="col.name" [title]="col.title" [width]="220">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                        {{col | renderer : dataItem}}
                    </ng-template>

                    <ng-template kendoGridFilterCellTemplate let-filter="filter" let-filterService="filterService">
                        <app-column-filter [column]="col" [data]="originalData"></app-column-filter>
                    </ng-template>
                </kendo-grid-column>
            </ng-container>

            <kendo-grid-messages noRecords="Nincsenek megjeleníthető adatok."></kendo-grid-messages>

            <kendo-grid-excel fileName="data.xlsx"></kendo-grid-excel>

            <ng-template kendoGridLoadingTemplate>
                <div class="loading-container">
                    <i class="bi bi-arrow-repeat loader-icon"></i>
                </div>
            </ng-template>
        </kendo-grid>
    </div>

    <div class="pager" [hidden]="hidePager" #pager>
        <div class="actions">
            <button (click)="originalData.toFirstPage()" [disabled]="originalData.currentPage < 2"><i class="icon-arrow-left-end"></i></button>
            <button (click)="originalData.previousPage()" [disabled]="originalData.currentPage < 2"><i class="bi bi-arrow-left-short"></i></button>
    
            <div class="d-flex" (click)="focusTo(inp)">
                <input type="text" class="left" [value]="originalData.currentPage" #inp>
                <input type="text" class="middle" value="/" disabled>
                <input type="text" class="right mr-1" [value]="originalData.pageCount" disabled>
            </div>
    
            <button (click)="originalData.nextPage()" [disabled]="originalData.currentPage >= originalData.pageCount"><i class="bi bi-arrow-right-short"></i></button>
            <button (click)="originalData.toLastPage()" [disabled]="originalData.currentPage >= originalData.pageCount"><i class="icon-arrow-left-end rotate-180"></i></button>
        </div>
    
        <div class="items-number">Tételek száma: {{originalData.gridData.total}}</div>
    </div>

    <div class="grid-footer" #gridFooter>
        <ng-content></ng-content>
    </div>
</div>
